<div class="wizard-pf">
  <div class="wizard-pf-body clearfix">
    <div ng-if="wizard.isWizard" class="wizard-pf-steps">
      <ul class="wizard-pf-steps-indicator">
        <li class="wizard-pf-step {{resolveActiveTab('configurations',1) ? 'active' : ''}}" data-tabgroup="1">
          <a ng-click="goTo('users/extensions')"><span class="wizard-pf-step-number">1</span><span
              class="wizard-pf-step-title">{{'Configurations' | translate}}</span></a>
        </li>
      </ul>
    </div>
  </div>
  <div class="wizard-pf-contents adjust-size no-margin-bottom">
    <h1 class="control-label centered" for="textInput-markup">{{'Configurations' | translate}}</h1>
    <div ng-if="true" class="container-fluid margin-top-lg">
      <div>
        <div class="filter-label-user">{{'Filter' | translate}}:</div>
        <select title="Tutti" pf-select="{ width: '180px' }" ng-model="selectedUsersFilter">
        </select>
      </div>
      <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details">
        <div class="form-group has-clear">
          <div class="search-pf-input-group" id="filter-domains-details">
            <input ng-model="searchUsersString" type="text" class="form-control input-lg"
              placeholder="{{'Search users' | translate}}..."></input>
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-default btn-lg" type="submit">
            <span class="fa fa-search"></span>
          </button>
        </div>
      </form>
    </div>
    <div id="configurationList" class="list-group list-view-pf list-view-pf-view mt-20">
      <!-- repeat  -->
      <div ng-repeat="user in allUsers track by user.username"
        class="list-group-item {{user.username == currentUser.username ? 'list-view-pf-expand-active' : ''}}">
        <div class="list-group-item-header">
          <div class="list-view-pf-actions">
            <div>
              <button ng-click="openDevice()"
                data-toggle="modal"
                data-target="#devicesAssociation"
                type="button"
                class="btn btn-primary">
                  {{"Associa dispositivo" | translate}}
              </button>
            </div>
          </div>
          <div ng-click="setCurrentUser(user)" class="list-view-pf-main-info">
            <div class="list-view-pf-left"><span aria-hidden="true" class="fa fa-user list-view-pf-icon-sm"></span>
            </div>
            <div class="list-view-pf-body">
              <div class="list-view-pf-description">
                <div class="list-group-item-heading">username - 202</div>
                <div class="list-group-item-text">User Name</div>
              </div>
              <div class="list-view-pf-additional-info">
                <div class="list-view-pf-additional-info-item"><span class="fa fa-cubes"></span><strong>2</strong>
                  dispositivi</div>
              </div>
            </div>
          </div>
        </div>
        <div ng-show="!hiddenUser[user.username]" ng-if="currentUser.username == user.username" class="list-group-item-container container-fluid cursor-default">
          <div ng-show="loadingUser[user.username]" class="spinner mt-14 mb-14"></div>
          <div ng-show="!loadingUser[user.username]" class="col-lg-12 plateral-10">
            <div id="configSettings" class="settings-container">
              <div class="list-group-item back-whitesmoke cursor-default border-color-whitesmoke mt-15">
                <div class="list-group-item-header back-whitesmoke cursor-default">
                  <div class="list-view-pf-main-info pb-12 pt-12">
                    <div class="list-view-pf-left">
                      <span aria-hidden="true"
                        class="fa fa-cogs list-view-pf-icon-sm no-border-left no-border-right no-border-top no-border-radius border-bottom-color-grey">
                      </span>
                    </div>
                    <div class="list-view-pf-body">
                      <div class="list-view-pf-description">
                        <div class="list-group-item-heading">Impostazioni</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="list-group-item">
                <div class="list-group-item-header background-white">
                  <div class="list-view-pf-main-info cursor-default background-white mt-10">
                    <div class="col-lg-12">
                      <div class="col-lg-6">
                        <form class="form-horizontal">
                          <div class="form-group">
                            <label class="control-label" for="textInputDisabled-markup">
                            <!-- <i class="fa fa-user mr-7"></i> -->
                            Profile</label>
                            <select class="combobox form-control mt-3" autocomplete="off" multiple>
                              <option value="{{count}}" ng-repeat="count in [] | range: 10 track by count"
                                on-finish-render="selectpickerRepeatEnd">{{"CIAO" | translate}}</option>
                            </select>
                          </div>
                          <div class="form-group">
                            <label class="control-label" for="textInput-markup">
                              <!-- <i class="fa fa-users mr-7"></i> -->
                              Group
                            </label>
                            <select class="combobox form-control mt-3" autocomplete="off">
                              <option value="{{count}}" ng-repeat="count in [] | range: 10 track by count"
                                on-finish-render="selectpickerRepeatEnd">{{"CIAO" | translate}}</option>
                            </select>
                          </div>
                        </form>
                      </div>
                      <div class="col-lg-6">
                        <form class="form-horizontal">
                          <div class="form-group">
                            <label class="control-label" for="textInput-markup">
                              <!-- <i class="fa fa-phone mr-7"></i> -->
                              {{"Phone" | translate}}
                            </label>
                            <div class="display-flex mt-3">
                              <input type="text" class="form-control" placeholder="{{'Phone' | translate}}">
                              <button type="button" class="btn btn-default adjust-button" aria-haspopup="true" aria-expanded="false">
                                {{"Imposta" | translate}}
                              </button>  
                            </div>
                          </div>
                          <div class="form-group">
                            <label class="control-label" for="textInputDisabled-markup">
                              <!-- <i class="fa fa-envelope mr-7"></i> -->
                              {{"Voicemail" | translate}}
                            </label>
                            <div class="mt-3">
                              <input on-element-render="switchRenderEnd" class="bootstrap-switch" type="checkbox" checked>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="configDevices" class="devices-container mb-15">
              <div class="list-group-item back-whitesmoke cursor-default border-color-whitesmoke mt-25">
                <div class="list-group-item-header back-whitesmoke cursor-default">
                  <div class="list-view-pf-main-info pb-12 pt-12">
                    <div class="list-view-pf-left">
                      <span aria-hidden="true"
                        class="fa fa-cubes list-view-pf-icon-sm no-border-left no-border-right no-border-top no-border-radius border-bottom-color-grey">
                      </span>
                    </div>
                    <div class="list-view-pf-body">
                      <div class="list-view-pf-description">
                        <div class="list-group-item-heading">Dispositivi</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- devices -->
              <div class="list-group-item cursor-default ng-scope">
                <div class="list-view-pf-actions">
                  <div class="display-flex">
                    <button class="btn btn-default">
                      {{"Disassocia" | translate}}
                    </button>
                    <button class="btn btn-default">
                      <i class="fa fa-retweet"></i>
                    </button>
                  </div>
                </div>
                <div class="list-view-pf-main-info">
                  <div class="list-view-pf-left">
                    <span class="fa fa-phone list-view-pf-icon-sm "></span>
                  </div>
                  <div class="list-view-pf-body">
                    <div class="list-view-pf-description">
                      <div class="list-group-item-heading configDevices-item-heading">
                        Sangoma 500 - <span>201</span>
                      </div>
                      <span class="weight-plus mr-20">
                      </span>
                      <div class="list-group-item-text">
                        <div class="col-lg-7">
                          <div class="form-group no-margin-bottom">
                            <div class="display-flex">
                              <select class="combobox form-control" autocomplete="off">
                                <option value="{{count}}" ng-repeat="count in [] | range: 10 track by count"
                                  on-finish-render="selectpickerRepeatEnd">{{"Default" | translate}}</option>
                              </select>
                              <button ng-click="setCurrentModelConf('Fanvil-X5S')" data-toggle="modal"
                                data-target="#singleModelModal"
                                class="btn btn-default mln-1">
                                <i class="fa fa-pencil"></i>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="list-view-pf-additional-info config-info ">
                      <div>MAC: <b class="ng-binding">00:50:58:50:3E:70</b></div>
                    </div>
                  </div>
                </div>
              </div>  
              <!-- webrtc -->
              <div class="list-group-item abstract-item cursor-default ng-scope">
                <div class="list-view-pf-actions">
                  <div class="display-flex">
                  </div>
                </div>
                <div class="list-view-pf-main-info">
                  <div class="list-view-pf-left">
                    <span class="fa fa-headphones list-view-pf-icon-sm "></span>
                  </div>
                  <div class="list-view-pf-body">
                    <div class="list-view-pf-description">
                      <div class="list-group-item-heading configDevices-item-heading">
                        {{"Web Phone" | translate}} - <span>91201</span>
                      </div>
                      <span class="weight-plus">
                      </span>
                      <div class="list-group-item-text">
                        <div class="col-lg-6">
                          <div class="form-group no-margin-bottom">
                            <div class="display-flex">
                              <input on-element-render="switchRenderEnd" class="bootstrap-switch" type="checkbox" checked>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="list-view-pf-additional-info config-info">
                    </div>
                  </div>
                </div>
              </div>
              <!-- mobile app -->
              <div class="list-group-item abstract-item cursor-default ng-scope">
                <div class="list-view-pf-actions">
                  <div class="display-flex">
                  </div>
                </div>
                <div class="list-view-pf-main-info">
                  <div class="list-view-pf-left">
                    <span class="fa fa-mobile list-view-pf-icon-sm "></span>
                  </div>
                  <div class="list-view-pf-body">
                    <div class="list-view-pf-description">
                      <div class="list-group-item-heading configDevices-item-heading">
                        {{"Mobile App" | translate}} - <span>92202</span>
                      </div>
                      <span class="weight-plus">
                      </span>
                      <div class="list-group-item-text">
                        <div class="col-lg-6">
                          <div class="form-group no-margin-bottom">
                            <div class="display-flex">
                              <input on-element-render="switchRenderEnd" class="bootstrap-switch" type="checkbox" checked>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="list-view-pf-additional-info config-info ">
                    </div>
                  </div>
                </div>
              </div>            
            </div>
          </div>
        </div>
      </div>
      <!-- end repeat -->
    </div>
    <div ng-if="false" class="blank-slate-pf ">
      <div class="blank-slate-pf-icon">
        <span class="pficon pficon-users"></span>
      </div>
      <h1>
        {{'No users found' | translate}}
      </h1>
      <p ng-if="!mode.isLdap">
        {{'Check your LDAP or Active Directory settings' | translate}}
      </p>
      <div ng-if="providerLocal" class="blank-slate-pf-main-action">
        <button data-toggle="modal" data-target="#createUser"
          class="btn btn-primary btn-lg">{{'Create user' | translate}}</button>
        <button ng-click="fileSelectImport()" class="btn btn-primary btn-lg no-margin">{{'Import' | translate}}</button>
        <input ng-model="temp.importFile" type="file" accept=".csv" id="importInput">
      </div>
    </div>

  </div>
  <!-- <wizard-step ng-if="wizard.isWizard" id="wizardStepBase"></wizard-step> -->
</div>

<div class="modal fade" id="devicesAssociation" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="wizard-modal">
    <div class="modal-dialog wizard-pf margin-10">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            <span class="pficon pficon-close"></span>
          </button>
          <h4 class="modal-title" id="dfSettingsMLabel">{{'Default Settings' | translate}}</h4>
        </div>
        <form class="form-horizontal">
          <div class="modal-body">
            <div class="col-lg-12 mb-5 mt-5">
              <form role="form" class="search-pf has-button adjust-form" id="form-lg-domains-details">
                <div class="form-group has-clear mt-10 no-lateral-margins display-flex">
                  <div class="search-pf-input-group full-width" id="filter-domains-details">
                    <input ng-model="searchUsersString" type="text" class="form-control input-lg ng-pristine ng-valid ng-touched" placeholder="Cerca dispositivo...">
                  </div>
                  <button class="btn btn-default btn-lg mln-1" type="submit">
                    <span class="fa fa-search"></span>
                  </button>
                </div>
              </form>
              <h1 class="control-label config-title-user mt-10" for="textInput-markup">
                <div class="fz-15 mb-10">
                  <span class="weight-plus ng-binding">15 dispositivi</span>
                </div>
              </h1>
              <!-- custom device -->
              <div class="list-group-item cursor-default">
                <div class="list-view-pf-actions mt-48">
                  <button class="btn btn-primary">
                    {{"Link to" | translate}} username
                  </button>
                </div>
                <div class="list-view-pf-main-info ">
                  <div class="list-view-pf-left">
                    <span class="fa fa-phone list-view-pf-icon-sm "></span>
                  </div>
                  <div class="list-view-pf-body">
                    <div class="list-view-pf-description">
                      <div class="list-group-item-heading configDevices-item-heading">
                        {{'Custom device' | translate}}
                      </div>
                      <span class="weight-plus mr-20">
                      </span>
                      <div class="list-group-item-text">
                        <div class="col-lg-7">
                        </div>
                      </div>
                    </div>
                    <div class="list-view-pf-additional-info config-info">
                      <div>{{'Web user' | translate}}:
                        <input class="form-control" placeholder="admin" ng-model="newDevice.web_user">
                      </div>
                      <div>{{'Web password' | translate}}:
                        <input class="form-control" placeholder="admin" ng-model="newDevice.web_password">
                      </div>
                    </div>
                  </div>
                </div>
              </div>  
              <!-- devices -->
              <div ng-repeat="count in [] | range: 10 track by count" class="list-group-item cursor-default">
                <div class="list-view-pf-actions">
                  <button class="btn btn-primary">
                    {{"Associa a username" | translate}}
                  </button>
                </div>
                <div class="list-view-pf-main-info ">
                  <div class="list-view-pf-left">
                    <span class="fa fa-phone list-view-pf-icon-sm "></span>
                  </div>
                  <div class="list-view-pf-body">
                    <div class="list-view-pf-description">
                      <div class="list-group-item-heading configDevices-item-heading">
                        Sangoma 500 - <span>201</span>
                      </div>
                      <span class="weight-plus mr-20">
                          Default

                      </span>
                      <div class="list-group-item-text">
                        <div class="col-lg-7">
                        </div>
                      </div>
                    </div>
                    <div class="list-view-pf-additional-info config-info ">
                      <div>MAC: <b class="ng-binding">00:50:58:50:3E:70</b></div>
                    </div>
                  </div>
                </div>
              </div>  
            </div>
            <div class="modal-footer submit">
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="singleModelModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="wizard-model-modal">
    <div class="modal-dialog wizard-pf margin-10">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            <span class="pficon pficon-close"></span>
          </button>
          <h4 class="modal-title" id="dfSettingsMLabel">{{'Single Model Editing' | translate}}</h4>
        </div>
        <div class="modal-body">
          <div class="mb-10 mt-5">
            <!-- start model ui -->
            <div ng-include="modelsUIUrl"></div>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>